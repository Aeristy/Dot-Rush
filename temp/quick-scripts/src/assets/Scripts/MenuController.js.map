{"version":3,"sources":["assets\\Scripts\\MenuController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport SoundController from \"./SoundController\";\nimport Utils from \"./Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class MenuController extends cc.Component {\n  static instance: MenuController;\n  @property(cc.Node)\n  Game: cc.Node = null;\n\n  @property(cc.Node)\n  Title: cc.Node = null;\n\n  @property(cc.Label)\n  bestScore: cc.Label = null;\n\n  @property(cc.Node)\n  Tap: cc.Node = null;\n\n  @property(cc.Node)\n  soundButton: cc.Node = null;\n\n  @property(cc.Node)\n  playButton: cc.Node = null;\n\n  @property(cc.SpriteFrame)\n  soundButtonOnSpriteFrame: cc.SpriteFrame = null;\n\n  @property(cc.SpriteFrame)\n  soundButtonOffSpriteFrame: cc.SpriteFrame = null;\n\n  @property(cc.AudioClip)\n  backgroundMusic: cc.AudioClip = null;\n\n  @property(cc.AudioClip)\n  btnClick: cc.AudioClip = null;\n\n  music = null;\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    var titlePos = this.Title.position;\n    MenuController.instance = this;\n    if (cc.sys.localStorage.getItem(\"bestScoreDotRush\") == null)\n      cc.sys.localStorage.setItem(\"bestScoreDotRush\", 0);\n    cc.tween(this.playButton)\n      .repeatForever(\n        cc.tween(this.playButton).to(0.5, { scale: 1.2 }).to(0.5, { scale: 1 })\n      )\n      .start();\n    cc.tween(this.Title)\n      .repeatForever(\n        cc\n          .tween(this.Title)\n          .to(0.5, { position: cc.v3(titlePos.x, titlePos.y - 50) })\n          .to(0.5, { position: cc.v3(titlePos) })\n      )\n      .start();\n    this.bestScore.string = \"Best \" + Utils.getLocal(\"bestScoreDotRush\");\n    Utils.setLocal(\"sound\", true);\n  }\n\n  start() {}\n\n  onPlayButtonClick() {\n    if (JSON.parse(Utils.getLocal(\"sound\")))\n      cc.audioEngine.play(this.btnClick, false, 1);\n    this.Game.active = true;\n    this.Game.opacity = 0;\n    cc.tween(this.Game).to(0.8, { opacity: 255 }).start();\n    this.node.parent.active = false;\n  }\n\n  onFirstTap() {\n    this.music = cc.audioEngine.play(this.backgroundMusic, true, 1);\n    this.node.parent.active = true;\n    this.node.parent.opacity = 0;\n    cc.tween(this.node.parent).to(0.8, { opacity: 255 }).start();\n    this.Tap.active = false;\n    this.Tap.destroy();\n  }\n\n  onClickSoundButton() {\n    cc.tween(this.soundButton)\n      .to(0.05, {\n        position: cc.v3(\n          this.soundButton.position.x,\n          this.soundButton.position.y - 7\n        ),\n      })\n      .to(0.05, { position: cc.v3(this.soundButton.position) })\n      .start();\n\n    Utils.setLocal(\"sound\", !JSON.parse(Utils.getLocal(\"sound\")));\n\n    this.updateSound();\n  }\n\n  updateSound() {\n    if (JSON.parse(Utils.getLocal(\"sound\"))) {\n      this.soundButton.getComponent(cc.Sprite).spriteFrame =\n        this.soundButtonOnSpriteFrame;\n    } else {\n      this.soundButton.getComponent(cc.Sprite).spriteFrame =\n        this.soundButtonOffSpriteFrame;\n    }\n  }\n\n  update(dt) {\n    if (!JSON.parse(Utils.getLocal(\"sound\"))) cc.audioEngine.pause(this.music);\n    if (JSON.parse(Utils.getLocal(\"sound\"))) cc.audioEngine.resume(this.music);\n    this.updateSound();\n  }\n}\n"]}