{"version":3,"sources":["assets\\Scripts\\UIController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameController from \"./GameController\";\nimport MenuController from \"./MenuController\";\n\nimport Utils from \"./Utils\";\n \nconst {ccclass, property} = cc._decorator;\n\t\n \n \n@ccclass\nexport default class UIController extends cc.Component {\n    static instance: UIController;\n    // @property(cc.Label)\n    // startLabel: cc.Label = null;\n    \n \n    @property(cc.Label)\n    currentScore: cc.Label = null;\n\n    @property(Array(cc.Node))\n    LevelProgress: Array<cc.Node> = new Array<cc.Node>;\n \n    @property(cc.Label)\n    bestScore: cc.Label = null;\n \n    @property(cc.Label)\n    resultScore: cc.Label = null;\n\n    @property(cc.Node)\n    Newbest: cc.Node = null;\n    \n    @property(cc.Node)\n    soundButton: cc.Node = null;\n\n    @property(cc.Node)\n    replayButton: cc.Node = null;\n\n    @property(cc.Node)\n    Game: cc.Node = null;\n\n    @property(cc.Node)\n    Result: cc.Node = null;\n\n    // @property(cc.Node)\n    // mainBackground: cc.Node = null;\n\n    // @property(cc.Node)\n    // resultBackground: cc.Node = null;\n \n    @property(cc.SpriteFrame)\n    soundButtonOnSpriteFrame: cc.SpriteFrame = null;\n \n    @property(cc.SpriteFrame)\n    soundButtonOffSpriteFrame: cc.SpriteFrame = null;\n\n    @property(cc.SpriteFrame)\n    LevelOnSpriteFrame: cc.SpriteFrame = null;\n\n    @property(cc.SpriteFrame)\n    LevelOffSpriteFrame: cc.SpriteFrame = null;\n\n    @property(cc.Prefab)\n    GamePrefab: cc.Prefab = null;\n\n\n    isNewBest = false;\n\n    newGame: cc.Node = null;\n    \n    \n    onLoad(){\n        cc.tween(this.replayButton).repeatForever(cc.tween(this.replayButton).to(0.1,{scale: 0.95}).to(0.1,{scale: 1})).start();\n        if (cc.sys.localStorage.getItem('bestScoreDotRush') == null) cc.sys.localStorage.setItem('bestScoreDotRush', 0);\n    }\n\n    onReplayButtonClick(){\n        this.node.parent.parent.active = false;\n        this.newGame = cc.instantiate(this.GamePrefab);\n        this.newGame.parent = this.node.parent.parent.parent;\n        this.newGame.active = true;\n        this.newGame.opacity = 0;\n        this.newGame.position = cc.v3(-720,-1280);\n        cc.tween(this.newGame).to(0.5,{opacity: 255}).start();      \n    }\n\n    updateScore(score: number) {\n        this.currentScore.string = score.toString();\n        this.resultScore.string = score.toString();\n        this.bestScore.string = 'Best ' + Utils.getLocal('bestScoreDotRush');\n        var progress = score%this.LevelProgress.length;\n        if(progress == 0 && score>0){\n            for (let i = 0; i < this.LevelProgress.length; i++) {\n                this.LevelProgress[i].getComponent(cc.Sprite).spriteFrame = this.LevelOffSpriteFrame;\n                \n            }\n            GameController.instance.levelUp();\n        }\n        else{\n            for (let i = 0; i < progress; i++) {\n                this.LevelProgress[i].getComponent(cc.Sprite).spriteFrame = this.LevelOnSpriteFrame;\n            \n            }\n        }\n        \n    }\n \n    // hideLabel(){\n    //     this.startLabel.node.active = false;\n    // }\n    loadScene(){\n        cc.director.loadScene(\"GameScene\");\n    }\n    \n    fadeInGameOver(){\n        this.Result.active = true;\n        this.Result.opacity = 0;\n        cc.tween(this.Result).to(0.8,{opacity: 255}).start();\n        if(this.isNewBest) {\n            this.Newbest.active = true;\n            cc.tween(this.Newbest).repeatForever(cc.tween(this.Newbest).to(0.12,{angle: 5}).to(0.12,{angle: -5})).start();\n        }\n        this.Game.active = false;\n    }\n    onClickSoundButton() {\n \n        cc.tween(this.soundButton)\n            .to(0.05, { position: cc.v3(this.soundButton.position.x, this.soundButton.position.y - 7) })\n            .to(0.05, { position: cc.v3(this.soundButton.position) }).start();\n \n \n        Utils.setLocal('sound', !JSON.parse(Utils.getLocal('sound')));\n \n        this.updateSound();\n        \n    }\n    updateSound() {\n        if (JSON.parse(Utils.getLocal('sound'))) {\n            \n            this.soundButton.getComponent(cc.Sprite).spriteFrame = this.soundButtonOnSpriteFrame;\n        }\n        else {\n            \n            this.soundButton.getComponent(cc.Sprite).spriteFrame = this.soundButtonOffSpriteFrame;\n        }\n    }\n    \n    start () {\n        this.bestScore.string = 'Best ' + \"0\";\n        this.updateScore(0);\n        this.updateSound();\n        UIController.instance = this;\n        \n    }\n \n    update (dt) {\n        this.updateSound();\n        \n    }\n}\n \n"]}