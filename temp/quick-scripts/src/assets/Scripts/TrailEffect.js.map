{"version":3,"sources":["assets\\Scripts\\TrailEffect.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA0C,gCAAY;IAAtD;QAAA,qEAwCC;QAnCG,cAAQ,GAAG,IAAI,CAAA;QACf,UAAI,GAAG,KAAI,CAAC,QAAQ,CAAA;QACpB,YAAM,GAAY,IAAI,CAAA;QACtB,cAAQ,GAAY,IAAI,CAAA;QACxB,YAAM,GAAY,KAAK,CAAC;;IA+B5B,CAAC;qBAxCoB,YAAY;IAUnB,6BAAM,GAAhB;QACI,cAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAA;IAC3B,CAAC;IAES,6BAAM,GAAhB,UAAiB,EAAU;QACvB,IAAG,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACxB,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC;YAAE,IAAI,CAAC,IAAI,IAAI,EAAE,CAAA;aAC7B;YACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAA;YACzB,IAAI,KAAK,GAAG,IAAI,EAAE,CAAC,IAAI,EAAE,CAAA;YAEzB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACvC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAA;YAC/B,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI;gBAAE,KAAK,CAAC,MAAM,GAAG,KAAK,CAAA;;gBAC1C,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAA;YAE5C,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAChE,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,EAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAChD,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC1C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC1C,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAA;YAC3F,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAA;YAClD,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAA;YAC/C,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAA;YAE7C,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAA;SAExB;IACL,CAAC;;IAvCgB,YAAY;QADhC,OAAO;OACa,YAAY,CAwChC;IAAD,mBAAC;CAxCD,AAwCC,CAxCyC,EAAE,CAAC,SAAS,GAwCrD;kBAxCoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class ShadowEffect extends cc.Component {\n    static instance: ShadowEffect;\n\n\n\n    interval = 0.01\n    time = this.interval\n    target: cc.Node = null\n    previous: cc.Node = null\n    enable: boolean = false;\n    protected onLoad(): void {\n        ShadowEffect.instance = this;\n        this.target = this.node\n    }\n\n    protected update(dt: number): void {\n        if(!this.enable) return;\n        if (this.time > 0) this.time -= dt\n        else {\n            this.time = this.interval\n            let clone = new cc.Node()\n\n            clone.parent = this.node.parent.parent;\n            clone.scale = this.target.scale\n            if (this.previous == null) clone.zIndex = 30000\n            else clone.zIndex = this.previous.zIndex - 1\n            \n            let targetPos = this.node.convertToWorldSpaceAR(cc.Vec2.ZERO_R);\n            clone.position = cc.v3(targetPos.x,targetPos.y);\n            console.log(targetPos.x,clone.position.x);\n            console.log(targetPos.y,clone.position.y);\n            clone.addComponent(cc.Sprite).spriteFrame = this.target.getComponent(cc.Sprite).spriteFrame\n            clone.setContentSize(this.target.getContentSize())\n            cc.tween(clone).to(0.4, { opacity: 0 }).start()\n            cc.tween(clone).to(0.4, { scale: 0 }).start()\n\n            this.previous = clone\n\n        }\n    }\n}"]}